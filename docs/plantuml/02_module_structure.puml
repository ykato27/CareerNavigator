@startuml モジュール構成図
!theme plain
skinparam backgroundColor #FFFFFF
skinparam packageBorderColor #333333
skinparam packageBackgroundColor #F5F5F5
skinparam componentBackgroundColor #BBDEFB
skinparam arrowColor #4A90E2
skinparam defaultFontName "Noto Sans CJK JP, IPAGothic, MS Gothic, sans-serif"

title CareerNavigator モジュール構成図 v3.0.0

package "Frontend (React)" #E3F2FD {
  component "App.tsx" as App
  component "pages/EmployeeCareerDashboard.tsx" as DashboardUI
  component "components/*" as Components
  
  App --> DashboardUI
  DashboardUI --> Components
}

package "Backend (FastAPI)" #E8F5E9 {
  component "main.py" as Main
  component "api/career_dashboard.py" as CareerAPI
  component "api/role_based_dashboard.py" as RoleAPI
  
  Main --> CareerAPI
  Main --> RoleAPI
}

package "skillnote_recommendation" {

  package "core (コアモジュール)" #E8F5E9 {
    component "models.py\n[データモデル]" as Models #C8E6C9
    component "data_loader.py\n[データ読み込み]" as DataLoader #C8E6C9
    component "data_transformer.py\n[データ変換]" as DataTransformer #C8E6C9
    component "evaluator.py\n[推薦評価]" as Evaluator #C8E6C9
    component "reference_persons.py\n[ロールモデル検索]" as RefPersons #C8E6C9
  }

  package "ml (機械学習モジュール)" #FFF3E0 {
    component "ml_recommender.py\n[ML推薦エンジン]" as MLRecommender #FFE0B2
    component "matrix_factorization.py\n[NMF実装]" as MatrixFactorization #FFE0B2
    component "diversity.py\n[多様性再ランキング]" as Diversity #FFE0B2
  }

  package "graph (グラフモジュール)" #E3F2FD {
    component "knowledge_graph.py\n[知識グラフ構築]" as KnowledgeGraph #BBDEFB
    component "hybrid_recommender.py\n[ハイブリッド推薦]" as HybridRecommender #BBDEFB
    component "career_path.py\n[キャリアパス分析]" as CareerPath #BBDEFB
    
    package "causal (因果推論)" #E1BEE7 {
      component "causal_graph_recommender.py\n[因果グラフ推薦]" as CausalRec #F3E5F5
      component "causal_career_path.py\n[因果パス生成]" as CausalPath #F3E5F5
      component "dependency_analyzer.py\n[依存関係分析]" as DepAnalyzer #F3E5F5
    }
  }

  package "utils (ユーティリティ)" #F3E5F5 {
    component "visualization.py" as Visualization #E1BEE7
  }
}

' 依存関係
CareerAPI --> CausalRec : "使用"
RoleAPI --> CausalPath : "使用"

CausalRec --> DepAnalyzer
CausalRec --> Models
CausalPath --> CausalRec

MLRecommender --> MatrixFactorization
MLRecommender --> Diversity

HybridRecommender --> KnowledgeGraph
HybridRecommender --> MatrixFactorization

' 外部からの利用
note top of Main
  FastAPI エントリーポイント
end note

note top of CausalRec
  因果推論エンジン
  ・LiNGAM
  ・3軸スコアリング
end note

legend right
  |<#E3F2FD> Frontend |Reactアプリ |
  |<#E8F5E9> Backend |FastAPIアプリ |
  |<#FFF3E0> ML |機械学習 |
  |<#E3F2FD> Graph |グラフ/因果推論 |
endlegend

@enduml
