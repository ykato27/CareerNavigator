@startuml コンポーネント図
!theme plain
skinparam backgroundColor #FFFFFF
skinparam componentBackgroundColor #E8F4F8
skinparam packageBackgroundColor #F5F5F5
skinparam databaseBackgroundColor #FFEBEE
skinparam arrowColor #4A90E2
skinparam defaultFontName "Noto Sans CJK JP, IPAGothic, MS Gothic, sans-serif"

title CareerNavigator コンポーネント図（技術スタック） v3.0.0

package "フロントエンド" #E3F2FD {
  package "Streamlit App" {
    [Streamlit\n(Webフレームワーク)] as Streamlit #BBDEFB
    [Plotly\n(可視化)] as Plotly #BBDEFB
    [Pyvis\n(ネットワーク可視化)] as Pyvis #BBDEFB
  }
  
  package "WebUI (React)" {
    [React\n(UIライブラリ)] as React #BBDEFB
    [Vite\n(ビルドツール)] as Vite #BBDEFB
    [Recharts\n(チャート)] as Recharts #BBDEFB
  }
}

package "バックエンド API" #E8F5E9 {
  [FastAPI\n(Web API)] as FastAPI #C8E6C9
  [Uvicorn\n(ASGIサーバー)] as Uvicorn #C8E6C9
  [Pydantic\n(データ検証)] as Pydantic #C8E6C9
}

package "ビジネスロジック層" #FFF3E0 {

  package "Causal Module" {
    [Causal Recommender] as CausalRec #FFE0B2
    [LiNGAM Model] as LiNGAM #FFE0B2
    [Dependency Analyzer] as DepAnalyzer #FFE0B2
  }

  package "ML Module" {
    [ML Recommender] as MLRec #FFE0B2
    [Matrix Factorization] as NMF #FFE0B2
    [Diversity Strategies] as Diversity #FFE0B2
  }

  package "Graph Module" {
    [Hybrid Recommender] as HybridRec #FFE0B2
    [Knowledge Graph] as KGraph #FFE0B2
  }
  
  package "Core Module" {
    [Data Loader] as DataLoader #FFE0B2
    [Evaluator] as Evaluator #FFE0B2
  }
}

package "分析ライブラリ" #F3E5F5 {
  [lingam\n(因果推論)] as LingamLib #E1BEE7
  [scikit-learn\n(ML)] as SkLearn #E1BEE7
  [pandas\n(データ操作)] as Pandas #E1BEE7
  [networkx\n(グラフ)] as NetworkX #E1BEE7
}

package "データ永続化層" #ECEFF1 {
  database "CSV Files\n(data/)" as CSV #B0BEC5
  database "Models\n(joblib)" as Models #B0BEC5
}

' 依存関係
Streamlit --> CausalRec
Streamlit --> MLRec
React --> FastAPI
FastAPI --> CausalRec
FastAPI --> MLRec

CausalRec --> LingamLib
CausalRec --> NetworkX
MLRec --> SkLearn
MLRec --> Pandas

DataLoader --> CSV
CausalRec --> Models

note top of React
  モダンフロントエンド
  ・TypeScript
  ・SPAアーキテクチャ
end note

note top of LingamLib
  因果探索ライブラリ
  ・DirectLiNGAM
  ・Bootstrap信頼性評価
end note

legend right
  |<#E3F2FD> フロントエンド |Streamlit / React |
  |<#E8F5E9> バックエンド |FastAPI |
  |<#FFF3E0> ロジック |因果推論 / ML |
  |<#F3E5F5> ライブラリ |分析 / 計算 |
  |<#ECEFF1> 永続化 |ファイル / モデル |
endlegend

@enduml
