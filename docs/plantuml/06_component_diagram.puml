@startuml コンポーネント図
!theme plain
skinparam backgroundColor #FFFFFF
skinparam componentBackgroundColor #E8F4F8
skinparam packageBackgroundColor #F5F5F5
skinparam databaseBackgroundColor #FFEBEE
skinparam arrowColor #4A90E2
skinparam defaultFontName "Noto Sans CJK JP, IPAGothic, MS Gothic, sans-serif"

title CareerNavigator コンポーネント図（技術スタック） v4.0.0

package "フロントエンド" #E3F2FD {
  package "WebUI (React)" {
    [React 18\n(UIライブラリ)] as React #BBDEFB
    [TypeScript\n(型システム)] as TypeScript #BBDEFB
    [Vite\n(ビルドツール)] as Vite #BBDEFB
    [React Router\n(ルーティング)] as Router #BBDEFB
    [Tailwind CSS v4\n(スタイリング)] as Tailwind #BBDEFB
    [Recharts\n(チャート可視化)] as Recharts #BBDEFB
    [Axios\n(HTTP通信)] as Axios #BBDEFB
    [Lucide React\n(アイコン)] as Icons #BBDEFB
  }
}

package "バックエンド API" #E8F5E9 {
  [FastAPI\n(Web API)] as FastAPI #C8E6C9
  [Uvicorn\n(ASGIサーバー)] as Uvicorn #C8E6C9
  [Pydantic\n(データ検証)] as Pydantic #C8E6C9
}

package "ビジネスロジック層" #FFF3E0 {

  package "Causal Module" {
    [Causal Graph Recommender] as CausalRec #FFE0B2
    [Dependency Analyzer] as DepAnalyzer #FFE0B2
    [Causal Career Path] as CareerPath #FFE0B2
  }

  package "Graph Module" {
    [Knowledge Graph] as KGraph #FFE0B2
  }

  package "Core Module" {
    [Data Loader] as DataLoader #FFE0B2
    [Data Transformer] as DataTransformer #FFE0B2
  }
}

package "分析ライブラリ" #F3E5F5 {
  [lingam\n(因果推論)] as LingamLib #E1BEE7
  [optuna\n(ベイズ最適化)] as Optuna #E1BEE7
  [pandas\n(データ操作)] as Pandas #E1BEE7
  [networkx\n(グラフ)] as NetworkX #E1BEE7
  [pyvis\n(グラフ可視化)] as Pyvis #E1BEE7
}

package "データ永続化層" #ECEFF1 {
  database "CSV Files\n(data/)" as CSV #B0BEC5
  database "Models\n(joblib)" as Models #B0BEC5
}

' 依存関係
React --> Axios
Axios --> FastAPI

FastAPI --> CausalRec
FastAPI --> CareerPath
FastAPI --> DataLoader
FastAPI --> DataTransformer

CausalRec --> LingamLib
CausalRec --> Optuna
CausalRec --> NetworkX
CausalRec --> Pandas

CareerPath --> KGraph
KGraph --> NetworkX
KGraph --> Pyvis

DataLoader --> CSV
CausalRec --> Models
DataTransformer --> Pandas

note top of React
  モダンフロントエンド
  ・React 18 + TypeScript
  ・Tailwind CSS v4
  ・SPAアーキテクチャ
  ・Recharts 可視化
end note

note top of LingamLib
  因果探索ライブラリ
  ・DirectLiNGAM
  ・スキル間の因果関係学習
  ・隣接行列生成
end note

note top of Optuna
  ベイズ最適化
  ・重みパラメータの自動調整
  ・ハイパーパラメータ最適化
end note

note top of CausalRec
  因果推論推薦エンジン
  ・3軸スコアリング
  ・因果的フィルタリング
  ・スマートロードマップ生成
end note

legend right
  |<#E3F2FD> フロントエンド |React + TypeScript |
  |<#E8F5E9> バックエンド |FastAPI |
  |<#FFF3E0> ロジック |因果推論 / グラフ |
  |<#F3E5F5> ライブラリ |分析 / 最適化 |
  |<#ECEFF1> 永続化 |CSV / モデル |
endlegend

@enduml
