# Graph ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€**ã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹ã®æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ **ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“‹ ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å½¹å‰²

- âœ… çŸ¥è­˜ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰ã¨æ´»ç”¨
- âœ… ã‚¹ã‚­ãƒ«é–“ã®é–¢ä¿‚æ€§ã‚’è€ƒæ…®ã—ãŸæ¨è–¦
- âœ… ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®å¯è¦–åŒ–
- âœ… ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¨è–¦ï¼ˆã‚°ãƒ©ãƒ• + æ©Ÿæ¢°å­¦ç¿’ï¼‰
- âœ… ã‚¹ã‚­ãƒ«ã®ä¾å­˜é–¢ä¿‚åˆ†æ

## ğŸ•¸ï¸ ã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹æ¨è–¦ã¨ã¯ï¼Ÿ

ã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹æ¨è–¦ã¯ã€**åŠ›é‡ï¼ˆã‚¹ã‚­ãƒ«ï¼‰é–“ã®ã¤ãªãŒã‚Š**ã‚’è€ƒæ…®ã—ã¦æ¨è–¦ã‚’è¡Œã„ã¾ã™ã€‚

**ä¾‹:**
```
Python â†’ Django â†’ Webã‚¢ãƒ—ãƒªé–‹ç™º
  â†“
NumPy â†’ ãƒ‡ãƒ¼ã‚¿åˆ†æ
```

**æ¨è–¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é•ã„:**
- **æ©Ÿæ¢°å­¦ç¿’ãƒ™ãƒ¼ã‚¹**: éå»ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰å­¦ç¿’ (ml ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
- **ã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹**: åŠ›é‡é–“ã®é–¢ä¿‚æ€§ã‚’æ´»ç”¨ (ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰**: ä¸¡æ–¹ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€é©ãªæ¨è–¦ã‚’å®Ÿç¾

## ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«åˆ†é¡

### ğŸ¯ ä¸»è¦ãªã‚¯ãƒ©ã‚¹ï¼ˆé‡è¦ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¯ãƒ©ã‚¹å | å½¹å‰² |
|---------|---------|------|
| **knowledge_graph.py** | `CompetenceKnowledgeGraph` | **çŸ¥è­˜ã‚°ãƒ©ãƒ•** - åŠ›é‡é–“ã®é–¢ä¿‚æ€§ã‚’ã‚°ãƒ©ãƒ•æ§‹é€ ã§è¡¨ç¾ |
| **hybrid_recommender.py** | `HybridGraphRecommender` | **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¨è–¦** - RWR + NMF + Content-Basedã‚’çµ„ã¿åˆã‚ã›ãŸæ¨è–¦ã‚·ã‚¹ãƒ†ãƒ  |
| **career_path.py** | `CareerPath` | **ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹** - ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚­ãƒ£ãƒªã‚¢çµŒè·¯ã‚’è¡¨ç¾ |

### ğŸ§­ ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

| ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¯ãƒ©ã‚¹å | å½¹å‰² |
|---------|---------|------|
| **random_walk.py** | `RandomWalkRecommender` | **Random Walk with Restart (RWR)** - PageRankãƒ™ãƒ¼ã‚¹ã®ã‚°ãƒ©ãƒ•æ¨è–¦ |
| **category_hierarchy.py** | `CategoryHierarchy` | **ã‚«ãƒ†ã‚´ãƒªéšå±¤** - åŠ›é‡ã‚«ãƒ†ã‚´ãƒªã®éšå±¤æ§‹é€ ã‚’ç®¡ç† |

### ğŸ“Š å¯è¦–åŒ–

| ãƒ•ã‚¡ã‚¤ãƒ« | é–¢æ•° | å½¹å‰² |
|---------|-----|------|
| **career_path_visualizer.py** | å¯è¦–åŒ–é–¢æ•° | ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã‚’ã‚°ãƒ©ãƒ•ã§å¯è¦–åŒ– |
| **path_visualizer.py** | ãƒ‘ã‚¹å¯è¦–åŒ–é–¢æ•° | æ¨è–¦çµŒè·¯ã‚’å¯è¦–åŒ– |
| **visualization_utils.py** | ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° | å¯è¦–åŒ–ã®è£œåŠ©é–¢æ•° |

### ğŸ§ª ãã®ä»–

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ | å½¹å‰² |
|---------|-----|------|
| **test_knowledge_graph.py** | ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ | çŸ¥è­˜ã‚°ãƒ©ãƒ•ã®çµ±åˆãƒ†ã‚¹ãƒˆ |

## ğŸš€ ä½¿ã„æ–¹

### çŸ¥è­˜ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰

```python
from skillnote_recommendation.graph.knowledge_graph import CompetenceKnowledgeGraph
from skillnote_recommendation.core.data_loader import DataLoader

# ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
loader = DataLoader()
data = loader.load_all_data()

# çŸ¥è­˜ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰
kg = CompetenceKnowledgeGraph(
    member_competence=data['member_competence'],
    member_master=data['member_master'],
    competence_master=data['competence_master'],
    use_category_hierarchy=True
)

# ã‚°ãƒ©ãƒ•ã®çµ±è¨ˆæƒ…å ±
print(f"ãƒãƒ¼ãƒ‰æ•°: {kg.G.number_of_nodes()}")
print(f"ã‚¨ãƒƒã‚¸æ•°: {kg.G.number_of_edges()}")
```

### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¨è–¦

```python
from skillnote_recommendation.graph.hybrid_recommender import HybridGraphRecommender
from skillnote_recommendation.ml.ml_recommender import MLRecommender
from skillnote_recommendation.ml.content_based_recommender import ContentBasedRecommender
from skillnote_recommendation.ml.feature_engineering import FeatureEngineer

# å„æ¨è–¦ã‚¨ãƒ³ã‚¸ãƒ³ã‚’æº–å‚™
ml_recommender = MLRecommender.build(...)
content_recommender = ContentBasedRecommender(...)
feature_engineer = FeatureEngineer(...)

# ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–
hybrid = HybridGraphRecommender(
    knowledge_graph=kg,
    ml_recommender=ml_recommender,
    content_recommender=content_recommender,
    feature_engineer=feature_engineer,
    graph_weight=0.4,    # RWRã®é‡ã¿
    cf_weight=0.3,       # NMFã®é‡ã¿
    content_weight=0.3   # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹ã®é‡ã¿
)

# ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®æ¨è–¦
recommendations = hybrid.recommend(
    member_code='M001',
    top_n=10,
    competence_type=['SKILL', 'EDUCATION']  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³: åŠ›é‡ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿
)

# æ¨è–¦çµæœã‚’è¡¨ç¤º
for rec in recommendations:
    print(f"{rec.competence_info['åŠ›é‡å']}: ã‚¹ã‚³ã‚¢ {rec.score:.3f}")
    print(f"  - RWRã‚¹ã‚³ã‚¢: {rec.graph_score:.3f}")
    print(f"  - NMFã‚¹ã‚³ã‚¢: {rec.cf_score:.3f}")
    print(f"  - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚³ã‚¢: {rec.content_score:.3f}")
    print(f"  - æ¨è–¦ç†ç”±:")
    for reason in rec.reasons:
        print(f"    {reason}")
```

### ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®å¯è¦–åŒ–

```python
from skillnote_recommendation.graph import CareerPath
from skillnote_recommendation.graph.career_path_visualizer import visualize_career_path

# ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã‚’æ§‹ç¯‰
career_path = CareerPath(
    member_code='m48',
    member_competence=data['member_competence'],
    competence_master=data['competence_master']
)

# ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã‚’å¯è¦–åŒ–
fig = visualize_career_path(career_path)
fig.show()  # ã¾ãŸã¯ fig.savefig('career_path.png')
```

### Random Walk with Restart (RWR) ã«ã‚ˆã‚‹æ¨è–¦

```python
from skillnote_recommendation.graph.random_walk import RandomWalkRecommender

# RWRæ¨è–¦ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–
rwr = RandomWalkRecommender(
    knowledge_graph=kg,
    restart_prob=0.15,      # å†ã‚¹ã‚¿ãƒ¼ãƒˆç¢ºç‡
    max_path_length=10,     # æ¨è–¦ãƒ‘ã‚¹ã®æœ€å¤§é•·
    max_paths=10,           # å„åŠ›é‡ã®æ¨è–¦ãƒ‘ã‚¹æ•°
    enable_cache=True       # PageRankã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–
)

# ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®æ¨è–¦ï¼ˆãƒ‘ã‚¹ä»˜ãï¼‰
recommendations = rwr.recommend(
    member_code='M001',
    top_n=10,
    return_paths=True,
    competence_type=['SKILL']  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³: åŠ›é‡ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿
)

# æ¨è–¦çµæœã‚’è¡¨ç¤º
for comp_code, score, paths in recommendations:
    comp_info = kg.get_node_info(f"competence_{comp_code}")
    print(f"{comp_info['name']}: ã‚¹ã‚³ã‚¢ {score:.5f}")
    print(f"  æ¨è–¦ãƒ‘ã‚¹æ•°: {len(paths)}å€‹")

    # æœ€åˆã®ãƒ‘ã‚¹ã‚’è¡¨ç¤º
    if paths:
        path_names = [kg.get_node_info(node)['name'] for node in paths[0]]
        print(f"  ãƒ‘ã‚¹ä¾‹: {' â†’ '.join(path_names)}")
```

## ğŸ“Š ã‚°ãƒ©ãƒ•æ§‹é€ ã®ä¾‹

### åŠ›é‡ã‚°ãƒ©ãƒ•

```
         [PythonåŸºç¤]
            /    \
           /      \
    [NumPy]      [Django]
       |            |
  [Pandas]    [Webã‚¢ãƒ—ãƒªé–‹ç™º]
       |
  [ãƒ‡ãƒ¼ã‚¿åˆ†æ]
```

### ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹

```
2020å¹´ â†’ [Excel] â†’ [SQL]
                      |
2021å¹´ â†’          [Python] â†’ [ãƒ‡ãƒ¼ã‚¿åˆ†æ]
                      |
2022å¹´ â†’          [æ©Ÿæ¢°å­¦ç¿’] â†’ [AIé–‹ç™º]
```

## ğŸ”¬ æŠ€è¡“è©³ç´°

### çŸ¥è­˜ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰æ–¹æ³•

1. **å…±èµ·ãƒ™ãƒ¼ã‚¹**: åŒã˜ãƒ¡ãƒ³ãƒãƒ¼ãŒä¿æœ‰ã—ã¦ã„ã‚‹åŠ›é‡ã‚’çµã³ã¤ã‘ã‚‹
   ```
   ãƒ¡ãƒ³ãƒãƒ¼AãŒ Python ã¨ NumPy ã‚’ä¿æœ‰
   â†’ Python â†â†’ NumPy ã®é–¢ä¿‚ã‚’è¿½åŠ 
   ```

2. **ã‚«ãƒ†ã‚´ãƒªãƒ™ãƒ¼ã‚¹**: åŒã˜ã‚«ãƒ†ã‚´ãƒªã®åŠ›é‡ã‚’çµã³ã¤ã‘ã‚‹
   ```
   Python ã¨ Django ãŒã€Œãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ã‚«ãƒ†ã‚´ãƒª
   â†’ Python â†â†’ Django ã®é–¢ä¿‚ã‚’è¿½åŠ 
   ```

3. **æ™‚ç³»åˆ—ãƒ™ãƒ¼ã‚¹**: ç¿’å¾—é †åºã§çµã³ã¤ã‘ã‚‹
   ```
   ãƒ¡ãƒ³ãƒãƒ¼BãŒ 2020å¹´ã«Pythonã€2021å¹´ã«Djangoã‚’ç¿’å¾—
   â†’ Python â†’ Django ã®æœ‰å‘é–¢ä¿‚ã‚’è¿½åŠ 
   ```

### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¹ã‚³ã‚¢è¨ˆç®—

```
ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¹ã‚³ã‚¢ = (ã‚°ãƒ©ãƒ•ã‚¹ã‚³ã‚¢ Ã— graph_weight) + (MLã‚¹ã‚³ã‚¢ Ã— ml_weight)

ã“ã“ã§ã€graph_weight + ml_weight = 1.0
```

## ğŸ“– è©³ã—ãçŸ¥ã‚ŠãŸã„æ–¹ã¸

- **åˆå¿ƒè€…å‘ã‘**: [åˆå¿ƒè€…å‘ã‘ã‚¬ã‚¤ãƒ‰](../../docs/BEGINNER_GUIDE.md)
- **ã‚°ãƒ©ãƒ•ç†è«–ã®åŸºç¤**: [ã‚°ãƒ©ãƒ•ç†è«– (Wikipedia)](https://ja.wikipedia.org/wiki/ã‚°ãƒ©ãƒ•ç†è«–)
- **çŸ¥è­˜ã‚°ãƒ©ãƒ•**: [Knowledge Graph (Wikipedia)](https://en.wikipedia.org/wiki/Knowledge_graph)

## ğŸ”— é–¢é€£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

- **[core/](../core/)** - ã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- **[ml/](../ml/)** - æ©Ÿæ¢°å­¦ç¿’ãƒ™ãƒ¼ã‚¹ã®æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ 
- **[utils/](../utils/)** - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

## âš ï¸ æ³¨æ„äº‹é …

- **ã‚°ãƒ©ãƒ•æ§‹ç¯‰**: ååˆ†ãªãƒ‡ãƒ¼ã‚¿é‡ãŒãªã„ã¨ã€æœ‰æ„ç¾©ãªã‚°ãƒ©ãƒ•ãŒæ§‹ç¯‰ã§ãã¾ã›ã‚“ï¼ˆãƒ¡ãƒ³ãƒãƒ¼æ•° 100äººä»¥ä¸Šã€åŠ›é‡æ•° 50ä»¥ä¸Šã‚’æ¨å¥¨ï¼‰ã€‚
- **è¨ˆç®—é‡**: ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€ãƒãƒ¼ãƒ‰æ•°ãƒ»ã‚¨ãƒƒã‚¸æ•°ãŒå¤šã„ã¨è¨ˆç®—æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚
- **å®Ÿé¨“çš„æ©Ÿèƒ½**: ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸€éƒ¨æ©Ÿèƒ½ã¯å®Ÿé¨“çš„ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨å‰ã«ååˆ†ãªãƒ†ã‚¹ãƒˆã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

## ğŸ“ å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

- [NetworkXãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://networkx.org/) - Pythonã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [ã‚°ãƒ©ãƒ•ç†è«–å…¥é–€](https://ja.wikipedia.org/wiki/ã‚°ãƒ©ãƒ•ç†è«–)
- [PageRankã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](https://ja.wikipedia.org/wiki/PageRank)

## ğŸ’¡ æ´»ç”¨ä¾‹

### 1. ã‚¹ã‚­ãƒ«ä¾å­˜é–¢ä¿‚ã®ç™ºè¦‹

ã€ŒDjangoã‚’ç¿’å¾—ã—ã¦ã„ã‚‹äººã¯ã€ãã®å‰ã«Pythonã‚’ç¿’å¾—ã—ã¦ã„ã‚‹ã€ã¨ã„ã£ãŸä¾å­˜é–¢ä¿‚ã‚’è‡ªå‹•ç™ºè¦‹ã§ãã¾ã™ã€‚

### 2. ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®æ¨è–¦

éå»ã®æˆåŠŸä¾‹ã‹ã‚‰ã€ã€ŒAã•ã‚“ã¨åŒã˜ã‚ˆã†ãªçµŒè·¯ã‚’ãŸã©ã‚Œã°ã€åŒã˜ã‚ˆã†ãªæˆé•·ãŒæœŸå¾…ã§ãã‚‹ã€ã¨ã„ã†æ¨è–¦ãŒå¯èƒ½ã§ã™ã€‚

### 3. ã‚¹ã‚­ãƒ«ã‚®ãƒ£ãƒƒãƒ—åˆ†æ

ç›®æ¨™ã¨ã™ã‚‹åŠ›é‡ã‚»ãƒƒãƒˆã«åˆ°é”ã™ã‚‹ãŸã‚ã«ã€ã©ã®åŠ›é‡ã‚’ç¿’å¾—ã™ã¹ãã‹ã€ã‚°ãƒ©ãƒ•ä¸Šã®æœ€çŸ­çµŒè·¯ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚
